<!DOCTYPE html>
<html>

    <head>
        <title> Ejercicios kubernetes &middot; Alepetepórico Blog </title>

        <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="generator" content="Hugo 0.80.0" />




<script src="https://code.jquery.com/jquery-3.1.1.min.js"   integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="   crossorigin="anonymous"></script>


<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>


<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">


<link rel="stylesheet" href="https://alepeteporico.github.io/css/nix.css">



<link rel="shortcut icon" href="/favicon.ico">



<link href="https://fonts.googleapis.com/css?family=Inconsolata%7COpen+Sans%7CConcert+One" rel="stylesheet">






    </head>

    <body>
        <header>
<nav class="navbar navbar-default navbar-fixed-top navbar-inverse font-header">
	<div class="container-fluid">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-1" aria-expanded="false">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
      <a class="navbar-brand" id="green-terminal" href='https://alepeteporico.github.io/'>
        blog@alepetepórico ~ $
      </a>
		</div>

		
		<div class="collapse navbar-collapse" id="navbar-collapse-1">
			<ul class="nav navbar-nav navbar-right">
				<li>
					<a href='https://alepeteporico.github.io/'>/home/blog</a>
        </li>
        
				
				
				<li class="dropdown">
                    
            		<a href="https://alepeteporico.github.io/apuntes">~/apuntes</a>
            		
        		</li>
        		
				
				<li class="dropdown">
                    
            		<a href="https://alepeteporico.github.io/ejercicios">~/ejercicios</a>
            		
        		</li>
        		
				
				<li class="dropdown">
                    
            		<a href="https://alepeteporico.github.io/problemas">~/problemas</a>
            		
        		</li>
        		
				
				<li class="dropdown">
                    
            		<a href="https://alepeteporico.github.io/practicas">~/prácticas</a>
            		
        		</li>
        		

			</ul>
		</div>
	</div>
</nav>
</header>

        <div class="flex-wrapper">
            <div class="container wrapper">
                <h1><a href="https://alepeteporico.github.io/ejercicios/ejercicos_kubernetes/">Ejercicios kubernetes</a></h1>
                <span class="post-date">2022-02-03 </span>
                <div class="post-content">
                    <h3 id="ejercicio-1">Ejercicio 1</h3>
<ul>
<li>Pantallazo con la salida de <code>minikube status</code> y pantallazo con la salida de <code>kubectl get nodes -o wide</code>.</li>
</ul>
<pre><code>alejandrogv@AlejandroGV:~$ minikube status
minikube
type: Control Plane
host: Running
kubelet: Running
apiserver: Running
kubeconfig: Configured

alejandrogv@AlejandroGV:~$ kubectl get nodes -o wide
NAME       STATUS   ROLES                  AGE     VERSION   INTERNAL-IP      EXTERNAL-IP   OS-IMAGE              KERNEL-VERSION   CONTAINER-RUNTIME
minikube   Ready    control-plane,master   6d23h   v1.23.1   192.168.39.156   &lt;none&gt;        Buildroot 2021.02.4   4.19.202         docker://20.10.12
</code></pre><h3 id="ejercicio-2">Ejercicio 2</h3>
<ul>
<li>Fichero yaml que has creado con la definición del Pod.</li>
</ul>
<pre><code>apiVersion: v1
kind: Pod
metadata:
  name: pod-ejercicio1
  labels:
    app: nginx
    service: web
  spec:
    containers:
      image: iesgn/test_web:latest
      name: contenedor-ejercicio1
      imagePullPolicy: Always
</code></pre><ul>
<li>Crea el Pod.</li>
</ul>
<pre><code>alejandrogv@AlejandroGV:~/kubernetes/ejercicios/1$ kubectl apply -f ejercicio1.yml 
pod/pod-ejercicio1 created
</code></pre><ul>
<li>Comprobación de que el Pod ha sido creado.</li>
</ul>
<pre><code>alejandrogv@AlejandroGV:~$ kubectl get pods
NAME             READY   STATUS    RESTARTS   AGE
pod-ejercicio1   1/1     Running   1          6d21h
</code></pre><ul>
<li>información detallada del Pod creado.</li>
</ul>
<pre><code>alejandrogv@AlejandroGV:~$ kubectl describe pod pod-ejercicio1
Name:         pod-ejercicio1
Namespace:    default
Priority:     0
Node:         minikube/192.168.39.156
Start Time:   Thu, 10 Feb 2022 11:58:47 +0100
Labels:       app=apache2
              service=web
Annotations:  &lt;none&gt;
Status:       Running
IP:           172.17.0.3
IPs:
  IP:  172.17.0.3
Containers:
  contenedor-ejercicio1:
    Container ID:   docker://69212c4621beece79ccc6266d8afbaf06e30da217f19531e46fb3d344bcd0229
    Image:          iesgn/test_web:latest
    Image ID:       docker-pullable://iesgn/test_web@sha256:001e1f4d8ab5d7ddf406e481392052769d1e87bdcce672fc6b91cdf3ec136886
    Port:           &lt;none&gt;
    Host Port:      &lt;none&gt;
    State:          Running
      Started:      Thu, 17 Feb 2022 09:28:17 +0100
    Ready:          True
    Restart Count:  1
    Environment:    &lt;none&gt;
    Mounts:
      /var/run/secrets/kubernetes.io/serviceaccount from kube-api-access-rhl9c (ro)
Conditions:
  Type              Status
  Initialized       True 
  Ready             True 
  ContainersReady   True 
  PodScheduled      True 
Volumes:
  kube-api-access-rhl9c:
    Type:                    Projected (a volume that contains injected data from multiple sources)
    TokenExpirationSeconds:  3607
    ConfigMapName:           kube-root-ca.crt
    ConfigMapOptional:       &lt;nil&gt;
    DownwardAPI:             true
QoS Class:                   BestEffort
Node-Selectors:              &lt;none&gt;
Tolerations:                 node.kubernetes.io/not-ready:NoExecute op=Exists for 300s
                             node.kubernetes.io/unreachable:NoExecute op=Exists for 300s
Events:
  Type    Reason     Age    From               Message
  ----    ------     ----   ----               -------
  Normal  Scheduled  6d21h  default-scheduler  Successfully assigned default/pod-ejercicio1 to minikube
  Normal  Pulling    6d21h  kubelet            Pulling image &quot;iesgn/test_web:latest&quot;
  Normal  Pulled     6d21h  kubelet            Successfully pulled image &quot;iesgn/test_web:latest&quot; in 49.133079538s
  Normal  Created    6d21h  kubelet            Created container contenedor-ejercicio1
  Normal  Started    6d21h  kubelet            Started container contenedor-ejercicio1
  Normal  Pulling    26m    kubelet            Pulling image &quot;iesgn/test_web:latest&quot;
  Normal  Pulled     26m    kubelet            Successfully pulled image &quot;iesgn/test_web:latest&quot; in 11.274157179s
  Normal  Created    26m    kubelet            Created container contenedor-ejercicio
</code></pre><ul>
<li>Accede de forma interactiva al Pod y comprueba los ficheros que están en el DocumentRoot (usr/local/apache2/htdocs/).</li>
</ul>
<pre><code>alejandrogv@AlejandroGV:~$ kubectl exec -it pod-ejercicio1 -- ls /usr/local/apache2/htdocs/
index.html
</code></pre><ul>
<li>Crea una redirección con kubectl port-forward utilizando el puerto de localhost 8888 y sabiendo que el Pod ofrece el servicio en el puerto 80. Accede a la aplicación desde un navegador.</li>
</ul>
<pre><code>lejandrogv@AlejandroGV:~$ kubectl port-forward pod-ejercicio1 8282:80
Forwarding from 127.0.0.1:8282 -&gt; 80
Forwarding from [::1]:8282 -&gt; 80
</code></pre><p><a href="/ejercicios_kubernetes/1.png">conexión</a></p>
<ul>
<li>Muestra los logs del Pod y comprueba que se visualizan los logs de los accesos que hemos realizado en el punto anterior.</li>
</ul>
<pre><code>alejandrogv@AlejandroGV:~/kubernetes/ejercicios/1$ kubectl logs pod-ejercicio1
AH00558: httpd: Could not reliably determine the server's fully qualified domain name, using 172.17.0.3. Set the 'ServerName' directive globally to suppress this message
AH00558: httpd: Could not reliably determine the server's fully qualified domain name, using 172.17.0.3. Set the 'ServerName' directive globally to suppress this message
[Thu Feb 17 10:04:46.032605 2022] [mpm_event:notice] [pid 1:tid 139668980692096] AH00489: Apache/2.4.46 (Unix) configured -- resuming normal operations
[Thu Feb 17 10:04:46.032835 2022] [core:notice] [pid 1:tid 139668980692096] AH00094: Command line: 'httpd -D FOREGROUND'
127.0.0.1 - - [17/Feb/2022:10:05:06 +0000] &quot;GET /favicon.ico HTTP/1.1&quot; 404 196
</code></pre><h3 id="ejercicio-3">Ejercicio 3</h3>

                </div>
                
                <div class="post-comments">
                    <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "Alepetepórico" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
                </div>
                
            </div>
            <footer class="footer text-center">
<p>Copyright &copy; 2022 Alepetepórico Blog -
<span class="credit">
	Powered by
	<a target="_blank" href="https://gohugo.io">Hugo</a>
	and
	<a target="_blank" href="https://github.com/LordMathis/hugo-theme-nix/">Nix</a> theme.
</span>
</p>
</footer>

        </div>
    </body>
