<!DOCTYPE html>
<html>

    <head>
        <title> Movimiento de datos &middot; Alepetepórico Blog </title>

        <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Hugo 0.80.0" />




<script src="https://code.jquery.com/jquery-3.1.1.min.js"   integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="   crossorigin="anonymous"></script>


<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>


<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">


<link rel="stylesheet" href="https://alepeteporico.github.io/css/nix.css">



<link rel="shortcut icon" href="/favicon.ico">



<link href="https://fonts.googleapis.com/css?family=Inconsolata%7COpen+Sans%7CConcert+One" rel="stylesheet">






    </head>

    <body>
        <header>
	<nav class="navbar navbar-dark bg-dark fixed-top navbar-expand-lg font-header">
		<div class="container-fluid">
			<a class="navbar-brand" id="green-terminal" href='https://alepeteporico.github.io/'>
				blog@alepetepórico ~ $
			</a>
			<button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse-1" 
					aria-controls="navbar-collapse-1" aria-expanded="false">
				<span class="visually-hidden">Toggle navigation</span>
				<span class="navbar-toggler-icon"></span>
			</button>
	
			
			<div class="collapse navbar-collapse" id="navbar-collapse-1">
				<ul class="nav navbar-nav ms-auto">
					<li class="nav-item">
						<a class="nav-link" href='https://alepeteporico.github.io/'>
							/home/blog</a>
					</li>
					
					
					
					<li class="nav-item dropdown">
						
						<a class="nav-link" href="https://alepeteporico.github.io/apuntes">~/apuntes</a>
						
					</li>
					
					
					<li class="nav-item dropdown">
						
						<a class="nav-link" href="https://alepeteporico.github.io/ejercicios">~/ejercicios</a>
						
					</li>
					
					
					<li class="nav-item dropdown">
						
						<a class="nav-link" href="https://alepeteporico.github.io/problemas">~/problemas</a>
						
					</li>
					
					
					<li class="nav-item dropdown">
						
						<a class="nav-link" href="https://alepeteporico.github.io/practicas">~/prácticas</a>
						
					</li>
					
				</ul>
			</div>
		</div>
	</nav>
</header>

        <div class="flex-wrapper">
            <div class="container wrapper">
                <h1><a href="https://alepeteporico.github.io/practicas/movimiento/">Movimiento de datos</a></h1>
                <span class="post-date">2023-02-22 </span>
                <div class="post-content">
                    <ol>
<li>Realiza una exportación del esquema de SCOTT usando Oracle Data Pump con las siguientes condiciones:</li>
</ol>
<p><strong>Exporta tanto la estructura de las tablas como los datos de las mismas.</strong></p>
<p><strong>Excluye la tabla BONUS y los departamentos con menos de dos empleados.</strong></p>
<p><strong>Realiza una estimación previa del tamaño necesario para el fichero de exportación.</strong></p>
<p><strong>Programa la operación para dentro de 2 minutos.</strong></p>
<p><strong>Genera un archivo de log en el directorio raíz.</strong></p>
<ul>
<li>En primer lugar vamos a ver la ayuda del comando <code>expdp</code> que será el que usemos para exportar el esquema y también lo usaremos a posterior.</li>
</ul>
<pre><code>vagrant@oracleagv:~$ expdp HELP=Y

Export: Release 19.0.0.0.0 - Production on Wed Feb 22 07:53:37 2023
Version 19.3.0.0.0

Copyright (c) 1982, 2019, Oracle and/or its affiliates.  All rights reserved.


The Data Pump export utility provides a mechanism for transferring data objects
between Oracle databases. The utility is invoked with the following command:

   Example: expdp scott/tiger DIRECTORY=dmpdir DUMPFILE=scott.dmp

You can control how Export runs by entering the 'expdp' command followed
by various parameters. To specify parameters, you use keywords:

   Format:  expdp KEYWORD=value or KEYWORD=(value1,value2,...,valueN)
   Example: expdp scott/tiger DUMPFILE=scott.dmp DIRECTORY=dmpdir SCHEMAS=scott
               or TABLES=(T1:P1,T1:P2), if T1 is partitioned table

USERID must be the first parameter on the command line.

------------------------------------------------------------------------------

The available keywords and their descriptions follow. Default values are listed within square brackets.

ABORT_STEP
Stop the job after it is initialized or at the indicated object.
Valid values are -1 or N where N is zero or greater.
N corresponds to the object's process order number in the master table.

ACCESS_METHOD
Instructs Export to use a particular method to unload data.
Valid keyword values are: [AUTOMATIC], DIRECT_PATH and EXTERNAL_TABLE.

ATTACH
Attach to an existing job.
For example, ATTACH=job_name.

CLUSTER
Utilize cluster resources and distribute workers across the Oracle RAC [YES].

COMPRESSION
Reduce the size of a dump file.
Valid keyword values are: ALL, DATA_ONLY, [METADATA_ONLY] and NONE.

COMPRESSION_ALGORITHM
Specify the compression algorithm that should be used.
Valid keyword values are: [BASIC], LOW, MEDIUM and HIGH.

CONTENT
Specifies data to unload.
Valid keyword values are: [ALL], DATA_ONLY and METADATA_ONLY.

DATA_OPTIONS
Data layer option flags.
Valid keyword values are: GROUP_PARTITION_TABLE_DATA, VERIFY_STREAM_FORMAT and XML_CLOBS.

DIRECTORY
Directory object to be used for dump and log files.

DUMPFILE
Specify list of destination dump file names [expdat.dmp].
For example, DUMPFILE=scott1.dmp, scott2.dmp, dmpdir:scott3.dmp.

ENCRYPTION
Encrypt part or all of a dump file.
Valid keyword values are: ALL, DATA_ONLY, ENCRYPTED_COLUMNS_ONLY, METADATA_ONLY and NONE.

ENCRYPTION_ALGORITHM
Specify how encryption should be done.
Valid keyword values are: [AES128], AES192 and AES256.

ENCRYPTION_MODE
Method of generating encryption key.
Valid keyword values are: DUAL, PASSWORD and [TRANSPARENT].

ENCRYPTION_PASSWORD
Password key for creating encrypted data within a dump file.

ENCRYPTION_PWD_PROMPT
Specifies whether to prompt for the encryption password [NO].
Terminal echo will be suppressed while standard input is read.

ESTIMATE
Calculate job estimates.
Valid keyword values are: [BLOCKS] and STATISTICS.

ESTIMATE_ONLY
Calculate job estimates without performing the export [NO].

EXCLUDE
Exclude specific object types.
For example, EXCLUDE=SCHEMA:&quot;='HR'&quot;.

FILESIZE
Specify the size of each dump file in units of bytes.

FLASHBACK_SCN
SCN used to reset session snapshot.

FLASHBACK_TIME
Time used to find the closest corresponding SCN value.

FULL
Export entire database [NO].

HELP
Display Help messages [NO].

INCLUDE
Include specific object types.
For example, INCLUDE=TABLE_DATA.

JOB_NAME
Name of export job to create.

KEEP_MASTER
Retain the master table after an export job that completes successfully [NO].

LOGFILE
Specify log file name [export.log].

LOGTIME
Specifies that messages displayed during export operations be timestamped.
Valid keyword values are: ALL, [NONE], LOGFILE and STATUS.

METRICS
Report additional job information to the export log file [NO].

NETWORK_LINK
Name of remote database link to the source system.

NOLOGFILE
Do not write log file [NO].

PARALLEL
Change the number of active workers for current job.

PARFILE
Specify parameter file name.

QUERY
Predicate clause used to export a subset of a table.
For example, QUERY=employees:&quot;WHERE department_id &gt; 10&quot;.

REMAP_DATA
Specify a data conversion function.
For example, REMAP_DATA=EMP.EMPNO:REMAPPKG.EMPNO.

REUSE_DUMPFILES
Overwrite destination dump file if it exists [NO].

SAMPLE
Percentage of data to be exported. 

SCHEMAS
List of schemas to export [login schema].

SERVICE_NAME
Name of an active Service and associated resource group to constrain Oracle RAC resources.

SOURCE_EDITION
Edition to be used for extracting metadata.

STATUS
Frequency (secs) job status is to be monitored where
the default [0] will show new status when available.

TABLES
Identifies a list of tables to export.
For example, TABLES=HR.EMPLOYEES,SH.SALES:SALES_1995.

TABLESPACES
Identifies a list of tablespaces to export.

TRANSPORTABLE
Specify whether transportable method can be used.
Valid keyword values are: ALWAYS and [NEVER].

TRANSPORT_FULL_CHECK
Verify storage segments of all tables [NO].

TRANSPORT_TABLESPACES
List of tablespaces from which metadata will be unloaded.

VERSION
Version of objects to export.
Valid keyword values are: [COMPATIBLE], LATEST or any valid database version.

VIEWS_AS_TABLES
Identifies one or more views to be exported as tables.
For example, VIEWS_AS_TABLES=HR.EMP_DETAILS_VIEW.

------------------------------------------------------------------------------

The following commands are valid while in interactive mode.
Note: abbreviations are allowed.

ADD_FILE
Add dumpfile to dumpfile set.

CONTINUE_CLIENT
Return to logging mode. Job will be restarted if idle.

EXIT_CLIENT
Quit client session and leave job running.

FILESIZE
Default filesize (bytes) for subsequent ADD_FILE commands.

HELP
Summarize interactive commands.

KILL_JOB
Detach and delete job.

PARALLEL
Change the number of active workers for current job.

REUSE_DUMPFILES
Overwrite destination dump file if it exists [NO]. 

START_JOB
Start or resume current job.
Valid keyword values are: SKIP_CURRENT.

STATUS
Frequency (secs) job status is to be monitored where
the default [0] will show new status when available.

STOP_JOB
Orderly shutdown of job execution and exits the client.
Valid keyword values are: IMMEDIATE.

STOP_WORKER
Stops a hung or stuck worker.

TRACE
Set trace/debug flags for the current job.
</code></pre><ul>
<li>Primero le damos permisos para crear directorios a SCOTT, que será el usuario que usemos para realizar la exportación.</li>
</ul>
<pre><code>SQL&gt; GRANT CREATE ANY DIRECTORY TO SCOTT;

Grant succeeded.
</code></pre><ul>
<li>Seguidamente nos conectamos a SCOTT y creamos el directorio donde haremos la exportación.</li>
</ul>
<pre><code>SQL&gt; connect SCOTT/TIGER
Connected.
SQL&gt; CREATE DIRECTORY DATA_PUMP_EXPORT AS '/opt/oracle/admin/ORCLCDB/dpdump/';

Directory created.
</code></pre><ul>
<li>Para cumplir con el apartado que nos pide que la acción sea realiada dentro de dos minutos usaremos el comando <code>at</code> de linux que nos permitirá programar la tarea.</li>
</ul>
<pre><code>at now + 2 minutes
</code></pre><ul>
<li>El comando de exportación sería el siguiente:</li>
</ul>
<pre><code>expdp SCOTT/TIGER DUMPFILE=scott.dmp LOG=exportacionscott.log DIRECTORY=DATA_PUMP_EXPORT SCHEMAS=SCOTT EXCLUDE=TABLE:\&quot;=\'BONUS\'\&quot; ESTIMATE=BLOCKS QUERY=dept:'&quot;WHERE deptno IN \(SELECT deptno FROM EMP GROUP BY deptno HAVING COUNT\(*\)&gt;2\)&quot;'
</code></pre><ul>
<li>Los dos conjuntados sería una cosa así:</li>
</ul>
<pre><code>vagrant@oracleagv:~$ at now + 2 minutes
warning: commands will be executed using /bin/sh
at&gt; expdp SCOTT/TIGER DUMPFILE=scott.dmp LOG=exportacionscott.log DIRECTORY=DATA_PUMP_EXPORT SCHEMAS=SCOTT EXCLUDE=TABLE:\&quot;=\'BONUS\'\&quot; ESTIMATE=BLOCKS QUERY=dept:'&quot;WHERE deptno IN \(SELECT deptno FROM EMP GROUP BY deptno HAVING COUNT\(*\)&gt;2\)&quot;'
at&gt; &lt;EOT&gt;
job 1 at Sat Feb 25 18:46:00 2023
</code></pre><ul>
<li>Miramos en el log como se ha realizado el proceso.</li>
</ul>
<pre><code>vagrant@oracleagv:~$ sudo cat /opt/oracle/admin/ORCLCDB/dpdump/exportacionscott.log 
;;; 
Export: Release 19.0.0.0.0 - Production on Sat Feb 25 18:46:00 2023
Version 19.3.0.0.0

Copyright (c) 1982, 2019, Oracle and/or its affiliates.  All rights reserved.
;;; 
Connected to: Oracle Database 19c Enterprise Edition Release 19.0.0.0.0 - Production
;;; Legacy Mode Active due to the following parameters:
;;; Legacy Mode Parameter: &quot;log=exportacionscott.log&quot; Location: Command Line, Replaced with: &quot;logfile=exportacionscott.log&quot;
;;; Legacy Mode has set reuse_dumpfiles=true parameter.
Starting &quot;SCOTT&quot;.&quot;SYS_EXPORT_SCHEMA_01&quot;:  SCOTT/******** DUMPFILE=scott.dmp logfile=exportacionscott.log DIRECTORY=DATA_PUMP_EXPORT SCHEMAS=SCOTT EXCLUDE=TABLE:&quot;='BONUS'&quot; ESTIMATE=BLOCKS QUERY=dept:&quot;WHERE deptno IN \(SELECT deptno FROM EMP GROUP BY deptno HAVING COUNT\(*\)&gt;2\)&quot; reuse_dumpfiles=true 
Processing object type SCHEMA_EXPORT/TABLE/TABLE_DATA
.  estimated &quot;SCOTT&quot;.&quot;EMP&quot;                               8.225 KB
.  estimated &quot;SCOTT&quot;.&quot;DEPT&quot;                              4.683 KB
.  estimated &quot;SCOTT&quot;.&quot;DUMMY&quot;                             4.683 KB
.  estimated &quot;SCOTT&quot;.&quot;SALGRADE&quot;                          4.683 KB
Processing object type SCHEMA_EXPORT/TABLE/INDEX/STATISTICS/INDEX_STATISTICS
Processing object type SCHEMA_EXPORT/TABLE/STATISTICS/TABLE_STATISTICS
Processing object type SCHEMA_EXPORT/STATISTICS/MARKER
Processing object type SCHEMA_EXPORT/PRE_SCHEMA/PROCACT_SCHEMA
Processing object type SCHEMA_EXPORT/TABLE/TABLE
Processing object type SCHEMA_EXPORT/TABLE/COMMENT
Processing object type SCHEMA_EXPORT/TABLE/INDEX/INDEX
. . exported &quot;SCOTT&quot;.&quot;EMP&quot;                               8.851 KB      16 rows
. . exported &quot;SCOTT&quot;.&quot;DEPT&quot;                                  6 KB       3 rows
. . exported &quot;SCOTT&quot;.&quot;DUMMY&quot;                             5.054 KB       1 rows
. . exported &quot;SCOTT&quot;.&quot;SALGRADE&quot;                          5.953 KB       5 rows
Master table &quot;SCOTT&quot;.&quot;SYS_EXPORT_SCHEMA_01&quot; successfully loaded/unloaded
******************************************************************************
Dump file set for SCOTT.SYS_EXPORT_SCHEMA_01 is:
  /opt/oracle/admin/ORCLCDB/dpdump/scott.dmp
Job &quot;SCOTT&quot;.&quot;SYS_EXPORT_SCHEMA_01&quot; successfully completed at Sat Feb 25 18:46:34 2023 elapsed 0 00:00:31
</code></pre><ol start="2">
<li>Importa el fichero obtenido anteriormente usando Oracle Data Pump pero en un usuario distinto de la misma base de datos.</li>
</ol>
<ul>
<li>Le damos permisos sobre el directorio al usuario en el que importaremos el esquema.</li>
</ul>
<pre><code>SQL&gt; GRANT READ,WRITE ON DIRECTORY DATA_PUMP_EXPORT TO PRUEBA;                          

Grant succeeded.
</code></pre><ul>
<li>Realizamos la importación.</li>
</ul>
<pre><code>vagrant@oracleagv:~$ impdp PRUEBA/PRUEBA dumpfile=scott.dmp schemas=SCOTT directory=DATA_PUMP_EXPORT remap_schema=SCOTT:PRUEBA

Import: Release 19.0.0.0.0 - Production on Sat Feb 25 19:30:47 2023
Version 19.3.0.0.0

Copyright (c) 1982, 2019, Oracle and/or its affiliates.  All rights reserved.

Connected to: Oracle Database 19c Enterprise Edition Release 19.0.0.0.0 - Production

Warning: Oracle Data Pump operations are not typically needed when connected to the root or seed of a container database.

Master table &quot;PRUEBA&quot;.&quot;SYS_IMPORT_SCHEMA_01&quot; successfully loaded/unloaded
Starting &quot;PRUEBA&quot;.&quot;SYS_IMPORT_SCHEMA_01&quot;:  PRUEBA/******** dumpfile=scott.dmp schemas=SCOTT directory=DATA_PUMP_EXPORT remap_schema=SCOTT:PRUEBA 
Processing object type SCHEMA_EXPORT/PRE_SCHEMA/PROCACT_SCHEMA
Processing object type SCHEMA_EXPORT/TABLE/TABLE
Processing object type SCHEMA_EXPORT/TABLE/TABLE_DATA
. . imported &quot;PRUEBA&quot;.&quot;EMP&quot;                              8.851 KB      16 rows
. . imported &quot;PRUEBA&quot;.&quot;DEPT&quot;                                 6 KB       3 rows
. . imported &quot;PRUEBA&quot;.&quot;DUMMY&quot;                            5.054 KB       1 rows
. . imported &quot;PRUEBA&quot;.&quot;SALGRADE&quot;                         5.953 KB       5 rows
Processing object type SCHEMA_EXPORT/TABLE/STATISTICS/TABLE_STATISTICS
Processing object type SCHEMA_EXPORT/STATISTICS/MARKER
Job &quot;PRUEBA&quot;.&quot;SYS_IMPORT_SCHEMA_01&quot; successfully completed at Sat Feb 25 19:31:02 2023 elapsed 0 00:00:13
</code></pre><ul>
<li>Entramos la usuario y comprobamos que podemos acceder a la inforación de el esquema de SCOTT.</li>
</ul>
<pre><code>SQL&gt; connect PRUEBA/PRUEBA
Connected.

SQL&gt; select * from dept;

    DEPTNO DNAME	  LOC
---------- -------------- -------------
	10 ACCOUNTING	  NEW YORK
	20 RESEARCH	  DALLAS
	30 SALES	  CHICAGO
</code></pre><ol start="3">
<li>Realiza una exportación de la estructura de todas las tablas de la base de datos usando el comando expdp de Oracle Data Pump probando al menos cinco de las posibles opciones que ofrece dicho comando y documentándolas adecuadamente.</li>
</ol>
<ul>
<li>Para realizar esta tarea el usuario <code>SYSTEM</code> debe tener una contraseña.</li>
</ul>
<pre><code>SQL&gt; ALTER USER SYSTEM IDENTIFIED BY SYSTEM
</code></pre><ul>
<li>Ahora vamos realizar la exportación y desglosaremos cada una de las opciones que hemos añadido.</li>
</ul>
<pre><code>vagrant@oracleagv:~$ expdp SYSTEM/SYSTEM DUMPFILE=total.dmp FULL=y LOG=total.log CONTENT=METADATA_ONLY ENCRYPTION_PASSWORD=3Xp0Rt4C10nT0t4L

Export: Release 19.0.0.0.0 - Production on Sat Feb 25 19:58:16 2023
Version 19.3.0.0.0

Copyright (c) 1982, 2019, Oracle and/or its affiliates.  All rights reserved.

Connected to: Oracle Database 19c Enterprise Edition Release 19.0.0.0.0 - Production
Legacy Mode Active due to the following parameters:
Legacy Mode Parameter: &quot;log=total.log&quot; Location: Command Line, Replaced with: &quot;logfile=total.log&quot;
Legacy Mode has set reuse_dumpfiles=true parameter.

Warning: Oracle Data Pump operations are not typically needed when connected to the root or seed of a container database.

Starting &quot;SYSTEM&quot;.&quot;SYS_EXPORT_FULL_01&quot;:  SYSTEM/******** DUMPFILE=total.dmp FULL=y logfile=total.log CONTENT=METADATA_ONLY ENCRYPTION_PASSWORD=******** reuse_dumpfiles=true 
Processing object type DATABASE_EXPORT/EARLY_OPTIONS/VIEWS_AS_TABLES/TABLE_DATA
Processing object type DATABASE_EXPORT/NORMAL_OPTIONS/TABLE_DATA
Processing object type DATABASE_EXPORT/NORMAL_OPTIONS/VIEWS_AS_TABLES/TABLE_DATA
Processing object type DATABASE_EXPORT/SCHEMA/TABLE/INDEX/STATISTICS/INDEX_STATISTICS
Processing object type DATABASE_EXPORT/SCHEMA/TABLE/STATISTICS/TABLE_STATISTICS
Processing object type DATABASE_EXPORT/STATISTICS/MARKER
Processing object type DATABASE_EXPORT/PRE_SYSTEM_IMPCALLOUT/MARKER
Processing object type DATABASE_EXPORT/PRE_INSTANCE_IMPCALLOUT/MARKER
Processing object type DATABASE_EXPORT/TABLESPACE
Processing object type DATABASE_EXPORT/PROFILE
Processing object type DATABASE_EXPORT/RADM_FPTM
Processing object type DATABASE_EXPORT/GRANT/SYSTEM_GRANT/PROC_SYSTEM_GRANT
Processing object type DATABASE_EXPORT/SCHEMA/GRANT/SYSTEM_GRANT
Processing object type DATABASE_EXPORT/SCHEMA/ROLE_GRANT
Processing object type DATABASE_EXPORT/SCHEMA/DEFAULT_ROLE
Processing object type DATABASE_EXPORT/SCHEMA/ON_USER_GRANT
Processing object type DATABASE_EXPORT/SCHEMA/TABLESPACE_QUOTA
Processing object type DATABASE_EXPORT/RESOURCE_COST
Processing object type DATABASE_EXPORT/TRUSTED_DB_LINK
Processing object type DATABASE_EXPORT/DIRECTORY/DIRECTORY
Processing object type DATABASE_EXPORT/DIRECTORY/GRANT/OWNER_GRANT/OBJECT_GRANT
Processing object type DATABASE_EXPORT/SYSTEM_PROCOBJACT/PRE_SYSTEM_ACTIONS/PROCACT_SYSTEM
Processing object type DATABASE_EXPORT/SYSTEM_PROCOBJACT/PROCOBJ
Processing object type DATABASE_EXPORT/SYSTEM_PROCOBJACT/POST_SYSTEM_ACTIONS/PROCACT_SYSTEM
Processing object type DATABASE_EXPORT/SCHEMA/PROCACT_SCHEMA
Processing object type DATABASE_EXPORT/EARLY_OPTIONS/VIEWS_AS_TABLES/TABLE
Processing object type DATABASE_EXPORT/EARLY_POST_INSTANCE_IMPCALLOUT/MARKER
Processing object type DATABASE_EXPORT/NORMAL_OPTIONS/TABLE
Processing object type DATABASE_EXPORT/NORMAL_OPTIONS/VIEWS_AS_TABLES/TABLE
Processing object type DATABASE_EXPORT/NORMAL_POST_INSTANCE_IMPCALLOUT/MARKER
Processing object type DATABASE_EXPORT/SCHEMA/TABLE/TABLE
Processing object type DATABASE_EXPORT/SCHEMA/TABLE/COMMENT
Processing object type DATABASE_EXPORT/SCHEMA/TABLE/FGA_POLICY
Processing object type DATABASE_EXPORT/SCHEMA/PROCEDURE/PROCEDURE
Processing object type DATABASE_EXPORT/SCHEMA/PROCEDURE/ALTER_PROCEDURE
Processing object type DATABASE_EXPORT/SCHEMA/TABLE/INDEX/INDEX
Processing object type DATABASE_EXPORT/SCHEMA/TABLE/CONSTRAINT/CONSTRAINT
Processing object type DATABASE_EXPORT/SCHEMA/TABLE/CONSTRAINT/REF_CONSTRAINT
Processing object type DATABASE_EXPORT/SCHEMA/TABLE/TRIGGER
Processing object type DATABASE_EXPORT/FINAL_POST_INSTANCE_IMPCALLOUT/MARKER
Processing object type DATABASE_EXPORT/SCHEMA/POST_SCHEMA/PROCACT_SCHEMA
Processing object type DATABASE_EXPORT/AUDIT_UNIFIED/AUDIT_POLICY_ENABLE
Processing object type DATABASE_EXPORT/AUDIT
Processing object type DATABASE_EXPORT/POST_SYSTEM_IMPCALLOUT/MARKER
. . exported &quot;SYS&quot;.&quot;KU$_USER_MAPPING_VIEW&quot;               6.125 KB      40 rows
. . exported &quot;AUDSYS&quot;.&quot;AUD$UNIFIED&quot;:&quot;SYS_P321&quot;           245.1 KB     128 rows
. . exported &quot;AUDSYS&quot;.&quot;AUD$UNIFIED&quot;:&quot;SYS_P181&quot;           129.9 KB     159 rows
. . exported &quot;AUDSYS&quot;.&quot;AUD$UNIFIED&quot;:&quot;SYS_P461&quot;           63.63 KB      30 rows
. . exported &quot;SYS&quot;.&quot;AUD$&quot;                                10.78 MB   84628 rows
. . exported &quot;SYSTEM&quot;.&quot;REDO_DB&quot;                          25.60 KB       1 rows
. . exported &quot;WMSYS&quot;.&quot;WM$WORKSPACES_TABLE$&quot;              12.11 KB       1 rows
. . exported &quot;WMSYS&quot;.&quot;WM$HINT_TABLE$&quot;                    9.992 KB      97 rows
. . exported &quot;LBACSYS&quot;.&quot;OLS$INSTALLATIONS&quot;               6.968 KB       2 rows
. . exported &quot;WMSYS&quot;.&quot;WM$WORKSPACE_PRIV_TABLE$&quot;          7.085 KB      11 rows
. . exported &quot;SYS&quot;.&quot;DAM_CONFIG_PARAM$&quot;                   6.539 KB      14 rows
. . exported &quot;SYS&quot;.&quot;TSDP_SUBPOL$&quot;                        6.335 KB       1 rows
. . exported &quot;WMSYS&quot;.&quot;WM$NEXTVER_TABLE$&quot;                 6.382 KB       1 rows
. . exported &quot;LBACSYS&quot;.&quot;OLS$PROPS&quot;                       6.242 KB       5 rows
. . exported &quot;WMSYS&quot;.&quot;WM$ENV_VARS$&quot;                      6.023 KB       3 rows
. . exported &quot;SYS&quot;.&quot;TSDP_PARAMETER$&quot;                     5.960 KB       1 rows
. . exported &quot;SYS&quot;.&quot;TSDP_POLICY$&quot;                        5.929 KB       1 rows
. . exported &quot;WMSYS&quot;.&quot;WM$VERSION_HIERARCHY_TABLE$&quot;       5.992 KB       1 rows
. . exported &quot;WMSYS&quot;.&quot;WM$EVENTS_INFO$&quot;                   5.820 KB      12 rows
. . exported &quot;LBACSYS&quot;.&quot;OLS$AUDIT_ACTIONS&quot;               5.765 KB       8 rows
. . exported &quot;LBACSYS&quot;.&quot;OLS$DIP_EVENTS&quot;                  5.546 KB       2 rows
. . exported &quot;AUDSYS&quot;.&quot;AUD$UNIFIED&quot;:&quot;AUD_UNIFIED_P0&quot;         0 KB       0 rows
. . exported &quot;LBACSYS&quot;.&quot;OLS$AUDIT&quot;                           0 KB       0 rows
. . exported &quot;LBACSYS&quot;.&quot;OLS$COMPARTMENTS&quot;                    0 KB       0 rows
. . exported &quot;LBACSYS&quot;.&quot;OLS$DIP_DEBUG&quot;                       0 KB       0 rows
. . exported &quot;LBACSYS&quot;.&quot;OLS$GROUPS&quot;                          0 KB       0 rows
. . exported &quot;LBACSYS&quot;.&quot;OLS$LAB&quot;                             0 KB       0 rows
. . exported &quot;LBACSYS&quot;.&quot;OLS$LEVELS&quot;                          0 KB       0 rows
. . exported &quot;LBACSYS&quot;.&quot;OLS$POL&quot;                             0 KB       0 rows
. . exported &quot;LBACSYS&quot;.&quot;OLS$POLICY_ADMIN&quot;                    0 KB       0 rows
. . exported &quot;LBACSYS&quot;.&quot;OLS$POLS&quot;                            0 KB       0 rows
. . exported &quot;LBACSYS&quot;.&quot;OLS$POLT&quot;                            0 KB       0 rows
. . exported &quot;LBACSYS&quot;.&quot;OLS$PROFILE&quot;                         0 KB       0 rows
. . exported &quot;LBACSYS&quot;.&quot;OLS$PROFILES&quot;                        0 KB       0 rows
. . exported &quot;LBACSYS&quot;.&quot;OLS$PROG&quot;                            0 KB       0 rows
. . exported &quot;LBACSYS&quot;.&quot;OLS$SESSINFO&quot;                        0 KB       0 rows
. . exported &quot;LBACSYS&quot;.&quot;OLS$USER&quot;                            0 KB       0 rows
. . exported &quot;LBACSYS&quot;.&quot;OLS$USER_COMPARTMENTS&quot;               0 KB       0 rows
. . exported &quot;LBACSYS&quot;.&quot;OLS$USER_GROUPS&quot;                     0 KB       0 rows
. . exported &quot;LBACSYS&quot;.&quot;OLS$USER_LEVELS&quot;                     0 KB       0 rows
. . exported &quot;SYS&quot;.&quot;DAM_CLEANUP_EVENTS$&quot;                     0 KB       0 rows
. . exported &quot;SYS&quot;.&quot;DAM_CLEANUP_JOBS$&quot;                       0 KB       0 rows
. . exported &quot;SYS&quot;.&quot;TSDP_ASSOCIATION$&quot;                       0 KB       0 rows
. . exported &quot;SYS&quot;.&quot;TSDP_CONDITION$&quot;                         0 KB       0 rows
. . exported &quot;SYS&quot;.&quot;TSDP_FEATURE_POLICY$&quot;                    0 KB       0 rows
. . exported &quot;SYS&quot;.&quot;TSDP_PROTECTION$&quot;                        0 KB       0 rows
. . exported &quot;SYS&quot;.&quot;TSDP_SENSITIVE_DATA$&quot;                    0 KB       0 rows
. . exported &quot;SYS&quot;.&quot;TSDP_SENSITIVE_TYPE$&quot;                    0 KB       0 rows
. . exported &quot;SYS&quot;.&quot;TSDP_SOURCE$&quot;                            0 KB       0 rows
. . exported &quot;SYSTEM&quot;.&quot;REDO_LOG&quot;                             0 KB       0 rows
. . exported &quot;WMSYS&quot;.&quot;WM$BATCH_COMPRESSIBLE_TABLES$&quot;         0 KB       0 rows
. . exported &quot;WMSYS&quot;.&quot;WM$CONSTRAINTS_TABLE$&quot;                 0 KB       0 rows
. . exported &quot;WMSYS&quot;.&quot;WM$CONS_COLUMNS$&quot;                      0 KB       0 rows
. . exported &quot;WMSYS&quot;.&quot;WM$LOCKROWS_INFO$&quot;                     0 KB       0 rows
. . exported &quot;WMSYS&quot;.&quot;WM$MODIFIED_TABLES$&quot;                   0 KB       0 rows
. . exported &quot;WMSYS&quot;.&quot;WM$MP_GRAPH_WORKSPACES_TABLE$&quot;         0 KB       0 rows
. . exported &quot;WMSYS&quot;.&quot;WM$MP_PARENT_WORKSPACES_TABLE$&quot;        0 KB       0 rows
. . exported &quot;WMSYS&quot;.&quot;WM$NESTED_COLUMNS_TABLE$&quot;              0 KB       0 rows
. . exported &quot;WMSYS&quot;.&quot;WM$RESOLVE_WORKSPACES_TABLE$&quot;          0 KB       0 rows
. . exported &quot;WMSYS&quot;.&quot;WM$RIC_LOCKING_TABLE$&quot;                 0 KB       0 rows
. . exported &quot;WMSYS&quot;.&quot;WM$RIC_TABLE$&quot;                         0 KB       0 rows
. . exported &quot;WMSYS&quot;.&quot;WM$RIC_TRIGGERS_TABLE$&quot;                0 KB       0 rows
. . exported &quot;WMSYS&quot;.&quot;WM$UDTRIG_DISPATCH_PROCS$&quot;             0 KB       0 rows
. . exported &quot;WMSYS&quot;.&quot;WM$UDTRIG_INFO$&quot;                       0 KB       0 rows
. . exported &quot;WMSYS&quot;.&quot;WM$VERSION_TABLE$&quot;                     0 KB       0 rows
. . exported &quot;WMSYS&quot;.&quot;WM$VT_ERRORS_TABLE$&quot;                   0 KB       0 rows
. . exported &quot;WMSYS&quot;.&quot;WM$WORKSPACE_SAVEPOINTS_TABLE$&quot;        0 KB       0 rows
. . exported &quot;MDSYS&quot;.&quot;RDF_PARAM$&quot;                        6.523 KB       3 rows
. . exported &quot;SYS&quot;.&quot;AUDTAB$TBS$FOR_EXPORT&quot;               5.960 KB       2 rows
. . exported &quot;SYS&quot;.&quot;DBA_SENSITIVE_DATA&quot;                      0 KB       0 rows
. . exported &quot;SYS&quot;.&quot;DBA_TSDP_POLICY_PROTECTION&quot;              0 KB       0 rows
. . exported &quot;SYS&quot;.&quot;FGA_LOG$FOR_EXPORT&quot;                  17.89 KB       1 rows
. . exported &quot;SYS&quot;.&quot;NACL$_ACE_EXP&quot;                           0 KB       0 rows
. . exported &quot;SYS&quot;.&quot;NACL$_HOST_EXP&quot;                      6.984 KB       2 rows
. . exported &quot;SYS&quot;.&quot;NACL$_WALLET_EXP&quot;                        0 KB       0 rows
. . exported &quot;SYS&quot;.&quot;SQL$TEXT_DATAPUMP&quot;                       0 KB       0 rows
. . exported &quot;SYS&quot;.&quot;SQL$_DATAPUMP&quot;                           0 KB       0 rows
. . exported &quot;SYS&quot;.&quot;SQLOBJ$AUXDATA_DATAPUMP&quot;                 0 KB       0 rows
. . exported &quot;SYS&quot;.&quot;SQLOBJ$DATA_DATAPUMP&quot;                    0 KB       0 rows
. . exported &quot;SYS&quot;.&quot;SQLOBJ$PLAN_DATAPUMP&quot;                    0 KB       0 rows
. . exported &quot;SYS&quot;.&quot;SQLOBJ$_DATAPUMP&quot;                        0 KB       0 rows
. . exported &quot;SYSTEM&quot;.&quot;SCHEDULER_JOB_ARGS&quot;                   0 KB       0 rows
. . exported &quot;SYSTEM&quot;.&quot;SCHEDULER_PROGRAM_ARGS&quot;               0 KB       0 rows
. . exported &quot;WMSYS&quot;.&quot;WM$EXP_MAP&quot;                        7.726 KB       3 rows
. . exported &quot;WMSYS&quot;.&quot;WM$METADATA_MAP&quot;                       0 KB       0 rows
Master table &quot;SYSTEM&quot;.&quot;SYS_EXPORT_FULL_01&quot; successfully loaded/unloaded
******************************************************************************
Dump file set for SYSTEM.SYS_EXPORT_FULL_01 is:
  /opt/oracle/admin/ORCLCDB/dpdump/total.dmp
Job &quot;SYSTEM&quot;.&quot;SYS_EXPORT_FULL_01&quot; successfully completed at Sat Feb 25 20:00:26 2023 elapsed 0 00:02:09
</code></pre><ul>
<li>
<p><code>DUMPFILE</code>: El fichero donde se hará la exportación.</p>
</li>
<li>
<p><code>LOG</code>: Fichero de log donde se registrará todo el proceso.</p>
</li>
<li>
<p><code>FULL</code>: Especificamos si queremos que se exporte toda la base de datos.</p>
</li>
<li>
<p><code>CONTENT</code>: Contenido específico que queremos exportar, en este caso solo los metadatos, lo que significa que hemos exportado la estructura de las tablas pero no el contenido de las mismas</p>
</li>
<li>
<p><code>ENCRYPTION_PASSWORD</code>: Encripta el fichero de exportación con la contraseña que especifiquemos.</p>
</li>
</ul>
<ol start="4">
<li>Intenta realizar operaciones similares de importación y exportación con las herramientas proporcionadas con MySQL desde línea de comandos, documentando el proceso.</li>
</ol>
<h3 id="exportación">EXPORTACIÓN</h3>
<ul>
<li>Una exportación de la base de datos de scott, excluyendo la tabla bonus y añadiendo un fichero de log por si hay errores.</li>
</ul>
<pre><code>root@alepeteporico:~# mysqldump -u root -p empresa --ignore-table=empresa.BONUS --log-error=/home/alejandrogv/Escritorio/ASIR/logfile.log &gt; /home/alejandrogv/Escritorio/ASIR/exportacion.sql
</code></pre><ul>
<li>Una exportación de todas las bases de datos.</li>
</ul>
<pre><code>root@alepeteporico:~# mysqldump -u root --all-databases --log-error=/home/alejandrogv/Escritorio/ASIR/logfile.log &gt; /home/alejandrogv/Escritorio/ASIR/exportaciontotal.sql
</code></pre><h3 id="importación">IMPORTACIÓN</h3>
<ul>
<li>Creamos una base de datos nueva donde importaremos el esquema de scott.</li>
</ul>
<pre><code>MariaDB [(none)]&gt; create database empresa2
    -&gt; ;
Query OK, 1 row affected (0,001 sec)
</code></pre><ul>
<li>Importaremos la base de datos.</li>
</ul>
<pre><code>root@alepeteporico:~# mysql -u root empresa2 &lt; /home/alejandrogv/Escritorio/ASIR/exportacion.sql
</code></pre><ul>
<li>Comprobamos que se ha realizado la importación.</li>
</ul>
<pre><code>MariaDB [(none)]&gt; use empresa2
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Database changed
MariaDB [empresa2]&gt; show tables;
+--------------------+
| Tables_in_empresa2 |
+--------------------+
| dept               |
| dummy              |
| emp                |
| salgrade           |
+--------------------+
4 rows in set (0,001 sec)
</code></pre><ol start="5">
<li>Intenta realizar operaciones similares de importación y exportación con las herramientas proporcionadas con Postgres desde línea de comandos, documentando el proceso.</li>
</ol>
<ul>
<li>Exportamos una base de datos excluyendo una tabla.</li>
</ul>
<pre><code>pg_dump prueba --exclude-table=carreras_profesionales &gt; exportacion.sql
</code></pre><ul>
<li>Vamos a</li>
</ul>

                </div>
                
                <div class="post-comments">
                    <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "Alepetepórico" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
                </div>
                
            </div>
            <footer class="footer text-center">
<p>Copyright &copy; 2023 Alepetepórico Blog -
<span class="credit">
	Powered by
	<a target="_blank" href="https://gohugo.io">Hugo</a>
	and
	<a target="_blank" href="https://github.com/LordMathis/hugo-theme-nix/">Nix</a> theme.
</span>
</p>
</footer>

        </div>
    </body>
