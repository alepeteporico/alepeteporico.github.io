<!DOCTYPE html>
<html>

    <head>
        <title> Instalación de servidores y clientes &middot; Alepetepórico Blog </title>

        <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="generator" content="Hugo 0.54.0" />




<script src="https://code.jquery.com/jquery-3.1.1.min.js"   integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="   crossorigin="anonymous"></script>


<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>


<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">


<link rel="stylesheet" href="https://alepeteporico.github.io/css/nix.css">



<link rel="shortcut icon" href="/favicon.ico">



<link href="https://fonts.googleapis.com/css?family=Inconsolata%7COpen+Sans%7CConcert+One" rel="stylesheet">






    </head>

    <body>
        <header>
<nav class="navbar navbar-default navbar-fixed-top navbar-inverse font-header">
	<div class="container-fluid">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-1" aria-expanded="false">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
      <a class="navbar-brand" id="green-terminal" href='https://alepeteporico.github.io/'>
        blog@alepetepórico ~ $
      </a>
		</div>

		
		<div class="collapse navbar-collapse" id="navbar-collapse-1">
			<ul class="nav navbar-nav navbar-right">
				<li>
					<a href='https://alepeteporico.github.io/'>/home/blog</a>
        </li>
        
				
				
				<li class="dropdown">
                    
            		<a href="https://alepeteporico.github.io/apuntes">~/apuntes</a>
            		
        		</li>
        		
				
				<li class="dropdown">
                    
            		<a href="https://alepeteporico.github.io/problemas">~/problemas</a>
            		
        		</li>
        		
				
				<li class="dropdown">
                    
            		<a href="https://alepeteporico.github.io/practicas">~/prácticas</a>
            		
        		</li>
        		

			</ul>
		</div>
	</div>
</nav>
</header>

        <div class="flex-wrapper">
            <div class="container wrapper">
                <h1><a href="https://alepeteporico.github.io/practicas/serv_client/">Instalación de servidores y clientes</a></h1>
                <span class="post-date">2021-04-05 </span>
                <div class="post-content">
                    

<p>Tras la instalación de cada servidor,  debe crearse una base de datos con al menos tres tablas o colecciones y poblarse de datos adecuadamente. Debe crearse un usuario y dotarlo de los privilegios necesarios para acceder remotamente a los datos. Se proporcionará esta información al resto de los miembros del grupo.</p>

<ul>
<li>Los clientes deben estar siempre en máquinas diferentes de los respectivos servidores a los que acceden.</li>
<li>Se documentará todo el proceso de configuración de los servidores.</li>
<li>Se aportarán pruebas del funcionamiento remoto de cada uno de los clientes.</li>
<li>Se aportará el código de las aplicaciones realizadas y prueba de funcionamiento de las mismas.</li>
</ul>

<h2 id="instalación-servidor-oracle-19c">Instalación servidor Oracle 19c</h2>

<ul>
<li><p>Hemos creado una maquina vagrant con centos 8 para instalar nuestro servidor de Oracle 19c, lo descargaremos de la <a href="https://www.oracle.com/es/database/technologies/oracle19c-linux-downloads.html#license-lightbox">página oficial de Oracle</a> y llevamos el fichero de instalación a nuestra máquina usando scp.</p>

<pre><code>[vagrant@oracle ~]$ scp alejandrogv@192.168.1.15:/home/alejandrogv/Descargas/oracle-database-ee-19c-1.0-1.x86_64.rpm .
</code></pre></li>

<li><p>El siguiente paso será obviamente instalarlo.</p>

<pre><code>[vagrant@oracle ~]$ sudo dnf install https://yum.oracle.com/repo/OracleLinux/OL8/baseos/latest/x86_64/getPackage/oracle-database-preinstall-19c-1.0-1.el8.x86_64.rpm

[vagrant@oracle ~]$ sudo yum -y localinstall oracle-database-ee-19c-1.0-1.x86_64.rpm
</code></pre></li>

<li><p>Antes de crear la base de datos de ejemplo debemos tener en cuenta que nos dará error si nuestra memoria RAM es inferior a 2GB. También he experimentado un error ya que no me resolvía el DNS de oracle, por eso he tenido que modificar mi /etc/hosts y añadir la siguiente línea:</p>

<pre><code>10.0.2.15 myhost
</code></pre></li>

<li><p>Ahora si, creamos la base de datos de ejemplo</p>

<pre><code>[oracle@oracle ~]$ sudo /etc/init.d/oracledb_ORCLCDB-19c configure
Configuring Oracle Database ORCLCDB.
Prepare for db operation
8% complete
Copying database files
31% complete
Creating and starting Oracle instance
32% complete
36% complete
40% complete
43% complete
46% complete
Completing Database Creation
51% complete
54% complete
Creating Pluggable Databases
58% complete
77% complete
Executing Post Configuration Actions
100% complete
Database creation complete. For details check the logfiles at:
 /opt/oracle/cfgtoollogs/dbca/ORCLCDB.
Database Information:
Global Database Name:ORCLCDB
System Identifier(SID):ORCLCDB
Look at the log file &quot;/opt/oracle/cfgtoollogs/dbca/ORCLCDB/ORCLCDB5.log&quot; for further details.
</code></pre></li>
</ul>

<p>Database configuration completed successfully. The passwords were auto generated, you must change them by connecting to the database using &lsquo;sqlplus / as sysdba&rsquo; as the oracle user.</p>

<ul>
<li><p>Continuemos con los usuarios, accedamos al usuario que se ha creado por defecto al instalar el paquete de oracle con su mismo nombre.</p>

<pre><code>[vagrant@oracle ~]$ sudo su - oracle
</code></pre></li>

<li><p>Y tendremos que modifcar el fichero <code>~/.bash_profile</code> añadiendo algunas lineas como las que vemos a continuación</p>

<pre><code>[oracle@oracle ~]$ cat .bash_profile 
# .bash_profile

# Get the aliases and functions
if [ -f ~/.bashrc ]; then
    . ~/.bashrc
fi

umask 022
export ORACLE_SID=ORCLCDB
export ORACLE_BASE=/opt/oracle/oradata
export ORACLE_HOME=/opt/oracle/product/19c/dbhome_1
export PATH=$PATH:$ORACLE_HOME/bin
</code></pre></li>

<li><p>Este fichero se ejecuta cada vez que iniciamos sesión en este usuario. sin necesidad de tener que salir ni reiniciar la máquina podemos usar <code>source</code> para ejecutarlo</p>

<pre><code>[oracle@oracle ~]$ source .bash_profile
</code></pre></li>

<li><p>Finalmente podremos entrar en sqlplus.</p>

<pre><code>[oracle@oracle ~]$ sqlplus / as sysdba

SQL*Plus: Release 19.0.0.0.0 - Production on Mon Apr 5 12:03:44 2021
Version 19.3.0.0.0

Copyright (c) 1982, 2019, Oracle.  All rights reserved.

Connected to an idle instance.

SQL&gt;
</code></pre></li>

<li><p>Podemos comprobar una pequeña información para ver que nuestra base de datos está operativa</p>

<pre><code>SQL&gt; SELECT instance_name, host_name, version, startup_time FROM v$instance;

INSTANCE_NAME
----------------
HOST_NAME
----------------------------------------------------------------
VERSION       STARTUP_T
----------------- ---------
ORCLCDB
oracle
19.0.0.0.0    05-APR-21
</code></pre></li>

<li><p>Pudiera ser que nos diera un error, esto se puede deber a que la base de datos de prueba no esté montada, para solucionarlo usariamos <code>STARTUP</code> y debería solucionarse el problema.</p></li>

<li><p>El siguiente paso será la creación de un usuario y otorgarle permisos al mismo</p>

<pre><code>SQL&gt; CREATE USER c##ale IDENTIFIED BY ale;      

User created.

SQL&gt; GRANT ALL PRIVILEGES TO c##ale;

Grant succeeded.
</code></pre></li>

<li><p>Nos desconectamos de este usuario y entramos en el recien creado para comprobar que funciona</p>

<pre><code>SQL&gt; DISCONNECT
Disconnected from Oracle Database 19c Enterprise Edition Release 19.0.0.0.0 - Production
Version 19.3.0.0.0
SQL&gt; CONNECT c##ale/ale
Connected.
</code></pre></li>

<li><p>Hemos creado unas tablas y añadido contenido a las mismas.</p>

<pre><code>SQL&gt; SELECT * FROM propietarios;

NIF   NOMBRE      APELLIDOS          CUOTA
--------- --------------- ------------------------- ----------
61219065B Mario       Guti??rrez Valencia          300
20015195C Alexandra   Angulo Lamas             320
19643077L Miriam      Zafra Valencia            45
33599573T Josue       Reche de los Santos           50
X4164637G Christian   Lopez Reyes               50

SQL&gt; SELECT * FROM caballos;

CODIGOCABA NIFPROPIE NOMBRE      FECHNAC   RAZA
---------- --------- --------------- --------- --------------------
1234567890 61219065B Sardinilla      22-APR-10 Arabe
0987654321 61219065B Caramelo        27-MAR-13 Mustang
1098743564 20015195C Marques         07-OCT-11 Mustang
2348743564 20015195C Juan Valdez     15-NOV-08 Purasangre
4348486564 19643077L Tarantino       13-DEC-09 Lusitano
3348486935 19643077L Paco        07-JUN-14 Purasangre
3348454346 33599573T Connell         25-JUL-07 Akhal-Teke
5438454346 33599573T Faraon      23-MAY-12 Akhal-Teke
5438345346 33599573T Isabel      23-APR-12 Holsteiner
3958345174 X4164637G Rafael      05-FEB-10 Arabe

10 rows selected.

SQL&gt; SELECT * FROM caballos_carreras;

CODIGOCABA EDADMINPART EDADMAXPART
---------- ----------- -----------
1234567890
0987654321
1098743564
2348743564
4348486564
3348486935
3348454346
5438454346
5438345346
3958345174

10 rows selected.
</code></pre></li>
</ul>

<h2 id="instalación-de-servidor-mysql">Instalación de servidor MYSQL.</h2>

<ul>
<li><p>la instalación es muy sencilla, simplemente instalamos el servidor de mariadb con un simple apt.</p>

<pre><code>vagrant@mysql:~$ sudo apt install mariadb-server
</code></pre></li>

<li><p>Podemos entrar al servidor.</p></li>

<li><p>Creamos un usuario.</p>

<pre><code>MariaDB [(none)]&gt; CREATE USER 'ale'@'%' IDENTIFIED BY 'ale';
Query OK, 0 rows affected (0.001 sec)
</code></pre></li>

<li><p>Y al crear una base de datos debemos darle a nuestro usuario permisos sobre la misma.</p>

<pre><code>MariaDB [(none)]&gt; CREATE DATABASE prueba;
Query OK, 1 row affected (0.001 sec)

MariaDB [(none)]&gt; GRANT ALL PRIVILEGES ON prueba.* TO 'ale'@'%';
Query OK, 0 rows affected (0.001 sec)
</code></pre></li>

<li><p>Hemos creado algunas tablas y le hemos añadido datos.</p>

<pre><code>MariaDB [prueba]&gt; SELECT * FROM Propietarios;
+-----------+-----------+---------------------+--------+
| NIF       | Nombre    | Apellidos           | Cuota  |
+-----------+-----------+---------------------+--------+
| 19643077L | Miriam    | Zafra Valencia      |  45.00 |
| 20015195C | Alexandra | Angulo Lamas        | 320.00 |
| 33599573T | Josue     | Reche de los Santos |  50.00 |
| 61219065B | Mario     | Gutiérrez Valencia  | 300.00 |
| X4164637G | Christian | Lopez Reyes         |  50.00 |
+-----------+-----------+---------------------+--------+
5 rows in set (0.001 sec)

MariaDB [prueba]&gt; SELECT * FROM Caballos;
+---------------+----------------+-------------+------------+------------+
| CodigoCaballo | NIFPropietario | Nombre      | FechNac    | Raza       |
+---------------+----------------+-------------+------------+------------+
| 1098743564    | 20015195C      | Marques     | 2011-11-07 | Mustang    |
| 1234567890    | 61219065B      | Sardinilla  | 2010-03-22 | Arabe      |
| 2348743564    | 20015195C      | Juan Valdez | 2008-02-15 | Purasangre |
| 3958345174    | X4164637G      | Rafael      | 2010-05-06 | Arabe      |
| 4348486564    | 19643077L      | Tarantino   | 2009-10-13 | Lusitano   |
+---------------+----------------+-------------+------------+------------+
5 rows in set (0.000 sec)

MariaDB [prueba]&gt; SELECT * FROM Caballos_Carreras;
+---------------+-------------+-------------+
| CodigoCaballo | EdadMinPart | EdadMaxPart |
+---------------+-------------+-------------+
| 1234567890    |        NULL |        NULL |
| 2348743564    |        NULL |        NULL |
| 4348486564    |        NULL |        NULL |
+---------------+-------------+-------------+
3 rows in set (0.001 sec)
</code></pre></li>
</ul>

<h3 id="configuración-para-acceso-remoto-de-mysql">Configuración para acceso remoto de MYSQL.</h3>

<ul>
<li><p>Debemos editar el fichero <code>/etc/mysql/mariadb.conf.d/50-server.cnf</code> y buscar la línea <code>bind-address</code>.</p>

<pre><code>bind-address              = 127.0.0.1
</code></pre></li>

<li><p>Lo único que deberemos hacer para permitir el acceso remoto es cambiar la dirección del localhost por 0.0.0.0</p>

<pre><code>bind-address              = 0.0.0.0
</code></pre></li>

<li><p>Ahora en la base de datos crearemos un usuario que especificaremos que</p></li>
</ul>

                </div>
                
                <div class="post-comments">
                    <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "Alepetepórico" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
                </div>
                
            </div>
            <footer class="footer text-center">
<p>Copyright &copy; 2021 Alepetepórico Blog -
<span class="credit">
	Powered by
	<a target="_blank" href="https://gohugo.io">Hugo</a>
	and
	<a target="_blank" href="https://github.com/LordMathis/hugo-theme-nix/">Nix</a> theme.
</span>
</p>
</footer>

        </div>
    </body>
