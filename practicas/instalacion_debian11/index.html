<!DOCTYPE html>
<html>

    <head>
        <title> Instalación de debian 11 con LVM &middot; Alepetepórico Blog </title>

        <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="generator" content="Hugo 0.80.0" />




<script src="https://code.jquery.com/jquery-3.1.1.min.js"   integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="   crossorigin="anonymous"></script>


<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>


<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">


<link rel="stylesheet" href="https://alepeteporico.github.io/css/nix.css">



<link rel="shortcut icon" href="/favicon.ico">



<link href="https://fonts.googleapis.com/css?family=Inconsolata%7COpen+Sans%7CConcert+One" rel="stylesheet">






    </head>

    <body>
        <header>
<nav class="navbar navbar-default navbar-fixed-top navbar-inverse font-header">
	<div class="container-fluid">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-1" aria-expanded="false">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
      <a class="navbar-brand" id="green-terminal" href='https://alepeteporico.github.io/'>
        blog@alepetepórico ~ $
      </a>
		</div>

		
		<div class="collapse navbar-collapse" id="navbar-collapse-1">
			<ul class="nav navbar-nav navbar-right">
				<li>
					<a href='https://alepeteporico.github.io/'>/home/blog</a>
        </li>
        
				
				
				<li class="dropdown">
                    
            		<a href="https://alepeteporico.github.io/apuntes">~/apuntes</a>
            		
        		</li>
        		
				
				<li class="dropdown">
                    
            		<a href="https://alepeteporico.github.io/problemas">~/problemas</a>
            		
        		</li>
        		
				
				<li class="dropdown">
                    
            		<a href="https://alepeteporico.github.io/practicas">~/prácticas</a>
            		
        		</li>
        		

			</ul>
		</div>
	</div>
</nav>
</header>

        <div class="flex-wrapper">
            <div class="container wrapper">
                <h1><a href="https://alepeteporico.github.io/practicas/instalacion_debian11/">Instalación de debian 11 con LVM</a></h1>
                <span class="post-date">2021-09-16 </span>
                <div class="post-content">
                    <hr>
<ul>
<li>Empezamos la instalación y seguimos todos los pasos normalmente hasta llegar a la configuración de los discos, la haremos manualmente y en mi caso he creado una máquina virtual para simular lo que hice en mi máquina anfitriona, para ello he creado una partición sin usar simulando que tengo en ella una partición con Windows 10.</li>
</ul>
<p><img src="/instalacion/1.png" alt=""></p>
<ul>
<li>
<p>Seguidamente elegiremos la opción de &ldquo;Configurar el gestor de volúmenes lógicos&rdquo; y crearemos un grupo de volúmenes.
<img src="/instalacion/2.png" alt=""></p>
</li>
<li>
<p>Elegimos el espacio libre que teníamos en el disco, este será nuestro grupo de volúmenes, aunque podríamos primero particionar este espacio libre y después crear un grupo de volúmenes con estas particiones, nosotros lo haremos al revés.
<img src="/instalacion/3.png" alt=""></p>
</li>
<li>
<p>Ahora dentro de este grupo de volúmenes crearemos de volúmenes lógicos, uno para el sistema y otro para la SWAP
<img src="/instalacion/9.png" alt=""></p>
</li>
</ul>
<p><img src="/instalacion/4.png" alt=""></p>
<ul>
<li>
<p>Tenemos creados los volúmenes lógicos como hemos visto en la anterior captura, pero debemos asignarle para  que la usaremos y donde las montaremos.
<img src="/instalacion/5.png" alt="">
<img src="/instalacion/6.png" alt="">
<img src="/instalacion/7.png" alt=""></p>
</li>
<li>
<p>Una vez hecho esto ya tendremos configurado LVM en nuestro sistema como queremos, no hemos usado todo el espacio que teníamos, por lo que mas tarde  podremos aumentar el tamaño de alguno de los volúmenes.
<img src="/instalacion/8.png" alt=""></p>
</li>
<li>
<p>Seguiremos la instalación con normalidad y arrancaremos nuestro debian buster, en mi caso tuve un problema que al parecer es muy común. Al arrancar llegaba un momento en que el sistema dejaba de responder, aparecía una pantalla en negro con el cursor arriba a la izquierda, sin posibilidad de hacer nada. Para arreglarlo entre en modo recovery y deshabilite los drivers de nouveau, que al parecer daban conflicto. para hacerlo modifique el fichero &ldquo;/etc/default/grub&rdquo; y modificaremos las dos líneas que vemos a continuación tal y como aparecen.</p>
<pre><code>  GRUB_CMDLINE_LINUX_DEFAULT=&quot;nouveau.modeset=0&quot;
  GRUB_CMDLINE_LINUX=&quot;nouveau.modeset=0&quot;
</code></pre>
</li>
<li>
<p>Con este cambio ya arrancará nuestro sistema con normalidad y podremos acceder al entorno gráfico, nuestra primera tarea dentro de el será instalar el firmware de la tarjeta inalámbrica, la cual al principio de la instalación nos advirtió que no se instalarían, aquí vemos la imagen.
<img src="/instalacion/11.png" alt=""></p>
</li>
<li>
<p>Para instalarlo deberemos añadir en el fichero sources.list los repositorios de backports e instalar el firmware que corresponde con el siguiente comando.</p>
<pre><code>  apt -t buster-backports install firmware-iwlwifi
</code></pre>
</li>
<li>
<p>Aparentemente solo faltarían dos cosas por estar a punto, los controladores de la GPU Nvidia y la configuración del network manager. Veamos que le ocurría a network manager, este parecía estar deshabilitado. Aunque el equipo tenía conexión el error exacto que daba network manager era &ldquo;cableado sin gestionar&rdquo; y en efecto no podía gestionarse nada desde network manager. Para solucionar el problema debemos editar el fichero &ldquo;/etc/NetworkManager/NetworkManager.conf&rdquo; y cambiar a true la opción managed. Una vez hecho esto reiniciamos el servicio y podremos comprobar que todo funciona correctamente.</p>
<pre><code>  [main]
  plugins=ifupdown,keyfile
    
  [ifupdown]
  managed=true
</code></pre>
</li>
<li>
<p>Por último tenemos los drivers de la gráfica, los cuales no he sido capaz de instalar, lo he intentado de varias formas según las páginas oficiales de debian, entre ellas descargar el paquete &ldquo;nvidia-detect&rdquo; que detecta que gráfica tienes y que driver te convendría instalar para usarla en debian, aunque instalé el recomendado daba muchos conflictos con varias cosas, entre ellas el nouveau, aunque hemos hecho que debian no cargue el modulo. Quizás se podría solucionar el problema instalando drivers no oficiales, instalando un kernel mas nuevo u de otras formas no oficiales. Sin embargo dejaremos al sistema trabajando con gráfica integrada del procesador, ya que funciona bien y no necesitaremos más para nuestro caso.</p>
</li>
</ul>

                </div>
                
                <div class="post-comments">
                    <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "Alepetepórico" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
                </div>
                
            </div>
            <footer class="footer text-center">
<p>Copyright &copy; 2021 Alepetepórico Blog -
<span class="credit">
	Powered by
	<a target="_blank" href="https://gohugo.io">Hugo</a>
	and
	<a target="_blank" href="https://github.com/LordMathis/hugo-theme-nix/">Nix</a> theme.
</span>
</p>
</footer>

        </div>
    </body>
